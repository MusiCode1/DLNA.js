<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LG WebOS - שלט רחוק</title>

    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="container">
        <h1>שלט רחוק WebOS</h1>

        <div id="main-content-wrapper">
            <div id="left-column" style="flex: 2; display: flex; flex-direction: column; max-width: 400px;">
                <div class="card">
                    <h2>התחברות</h2>

                    <!-- כפתורי בחירת שיטת התחברות -->
                    <div class="connection-type-selector">
                        <label class="radio-button">
                            <input type="radio" name="connection-type" value="manual" checked>
                            <span>הזנה ידנית</span>
                        </label>
                        <label class="radio-button">
                            <input type="radio" name="connection-type" value="list">
                            <span>בחירה מרשימה</span>
                        </label>
                    </div>

                    <!-- טופס הזנה ידנית -->
                    <div id="manual-connection" class="connection-form">
                        <div class="input-group">
                            <input type="text" id="tv-ip" placeholder="הכנס כתובת IP של הטלוויזיה">
                            <input type="text" id="client-key" placeholder="מפתח לקוח (אופציונלי)">
                            <input type="text" id="tv-mac" placeholder="כתובת MAC (ל-WoL)">
                        </div>
                    </div>

                    <!-- טופס בחירה מרשימה -->
                    <div id="list-connection" class="connection-form" style="display: none;">
                        <div class="input-group">
                            <select id="tv-select" class="tv-select">
                                <option value="">בחר טלוויזיה...</option>
                            </select>
                        </div>
                        <!-- פרטי הטלוויזיה הנבחרת -->
                        <div id="selected-tv-details" class="tv-details" style="display: none;">
                            <div class="detail-row">
                                <span class="detail-label">שם:</span>
                                <span class="detail-value" id="selected-tv-name"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">IP:</span>
                                <span class="detail-value" id="selected-tv-ip"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">MAC:</span>
                                <span class="detail-value" id="selected-tv-mac"></span>
                            </div>
                        </div>
                    </div>

                    <div id="power-status-wrapper" style="margin: 10px 0;">
                        <div id="power-status-indicator" class="power-status power-status--unknown">
                            <span class="power-status__dot"></span>
                            <span id="power-status-text">מצב המסך לא ידוע</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <button id="wake-btn" type="button">הפעל מסך (WoL)</button>
                        <button id="connect-btn">התחבר</button>
                        <button id="disconnect-btn" type="button" disabled>התנתק</button>
                    </div>

                    <p><strong>הערה:</strong> אם זו הפעם הראשונה, יש לאשר את החריגה האבטחתית בדפדפן.
                        <a id="cert-link" href="#" target="_blank" style="display: none;">פתח קישור לאישור תעודה</a>.
                    </p>
                    <div id="status" class="status disconnected">לא מחובר</div>
                </div>
            </div>

            <!-- Wrapper משותף לפקדים וצילום מסך -->
            <div id="controls-screenshot-wrapper" style="display: none; gap: 20px; flex: 1;">
                <div id="screenshot-container" class="card" style="flex: 1; display: flex; flex-direction: column;">
                    <h2>צילום מסך</h2>
                    <div
                        style="position: relative; flex-grow: 1; min-height: 200px; display: flex; align-items: center; justify-content: center; background-color: #f0f2f5; border-radius: 6px;">
                        <img id="screenshot-img" src="" alt="צילום מסך"
                            style="width: 100%; height: 100%; border-radius: 6px; object-fit: contain; position: absolute; top: 0; left: 0; display: none;">
                        <div id="screenshot-placeholder" style="text-align: center; color: #65676b;">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                <polyline points="21 15 16 10 5 21"></polyline>
                            </svg>
                            <p style="margin-top: 10px;">צילום מסך יוצג כאן</p>
                        </div>
                    </div>
                </div>

                <div id="controls" class="card" style="flex: 1;">
                    <h2>ניווט ושמע</h2>
                    <!-- אזור ניווט ראשי: D-pad + Volume -->
                    <div class="navigation-controls">
                        <!-- D-pad עגול -->
                        <div class="d-pad-circular-container">
                            <div class="d-pad-circular-bg">
                                <button data-button="UP" class="d-pad-btn d-pad-up">▲</button>
                                <button data-button="LEFT" class="d-pad-btn d-pad-left">◄</button>
                                <button data-button="ENTER" class="d-pad-btn d-pad-center">OK</button>
                                <button data-button="RIGHT" class="d-pad-btn d-pad-right">►</button>
                                <button data-button="DOWN" class="d-pad-btn d-pad-down">▼</button>
                            </div>
                        </div>

                        <!-- לחצני ווליום -->
                        <div class="volume-controls">
                            <button data-uri="ssap://audio/volumeUp">Volume +</button>
                            <button data-uri="ssap://audio/volumeDown">Volume -</button>
                        </div>
                    </div>

                    <h2>פעולות מהירות</h2>
                    <!-- חזור, בית, השתק, בטל השתקה -->
                    <div class="quick-actions">
                        <button data-button="BACK">חזור</button>
                        <button data-button="HOME">בית</button>
                        <button data-uri="ssap://audio/setMute" data-payload='{"mute": true}'>השתק</button>
                        <button data-uri="ssap://audio/setMute" data-payload='{"mute": false}'>בטל השתקה</button>
                    </div>

                    <h2>מערכת ותצוגה</h2>
                    <!-- צילום מסך, הודעה, כיבוי -->
                    <div class="grid-controls">
                        <div class="screenshot-controls">
                            <button id="screenshot-btn">צלם מסך</button>
                            <label for="continuous-screenshot-cb">
                                <input type="checkbox" id="continuous-screenshot-cb" title="צלם ברצף">
                                <span>רצף</span>
                            </label>
                        </div>
                        <button id="show-toast-btn">הצג הודעה</button>
                        <button data-uri="ssap://system/turnOff" class="power-off-btn">כיבוי</button>
                    </div>

                    <h2>הקלדה</h2>
                    <div class="input-group">
                        <input type="text" id="text-input" placeholder="הקלד כאן..." style="flex-grow: 1;">
                        <button id="enter-btn">שלח Enter</button>
                        <button id="delete-btn">מחק תו</button>
                    </div>

                    <div id="toast-input" class="input-group">
                        <input type="text" id="toast-message" placeholder="הודעה להצגה">
                        <button id="send-toast-btn">שלח</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- מסתבר שקלאודפלייר שומר את הגרסאות הקודמות בקאש. לכן צריך לעדכן גרסה באופן ידני -->
    <script src="./dist/client.js?v=102" type="module"></script>

</body>

</html>