[Docs](/docs)[Reference](/reference)[Guides](/guides)[Blog](/blog)

[![Discord logo](<image>)](https://bun.sh/discord)

[Discord](https://bun.sh/discord)

[![GitHub logo](<image>)](https://github.com/oven-sh/bun)

Intro

[What is Bun?](/docs/index)

[Installation](/docs/installation)

[Quickstart](/docs/quickstart)

[TypeScript](/docs/typescript)

Templating

[`bun init`](/docs/cli/init)

[`bun create`](/docs/cli/bun-create)

Runtime

[`bun run`](/docs/cli/run)

[File types](/docs/runtime/loaders)

[TypeScript](/docs/runtime/typescript)

[JSX](/docs/runtime/jsx)

[Environment variables](/docs/runtime/env)

[Bun APIs](/docs/runtime/bun-apis)

[Web APIs](/docs/runtime/web-apis)

[Node.js compatibility](/docs/runtime/nodejs-apis)

[Single-file executable](/docs/bundler/executables)

[Plugins](/docs/runtime/plugins)

[Watch mode](/docs/runtime/hot)

[Module resolution](/docs/runtime/modules)

[Auto-install](/docs/runtime/autoimport)

[bunfig.toml](/docs/runtime/bunfig)

[Debugger](/docs/runtime/debugger)

Framework APISOON

Package manager

[`bun install`](/docs/cli/install)

[`bun add`](/docs/cli/add)

[`bun remove`](/docs/cli/remove)

[`bun update`](/docs/cli/update)

[`bun publish`](/docs/cli/publish)

[`bun outdated`](/docs/cli/outdated)

[`bun link`](/docs/cli/link)

[`bun pm`](/docs/cli/pm)

[Global cache](/docs/install/cache)

[Workspaces](/docs/install/workspaces)

[Catalogs](/docs/install/catalogs)

[Lifecycle scripts](/docs/install/lifecycle)

[Filter](/docs/cli/filter)

[Lockfile](/docs/install/lockfile)

[Scopes and registries](/docs/install/registries)

[Overrides and resolutions](/docs/install/overrides)

[Patch dependencies](/docs/install/patch)

[Audit dependencies](/docs/install/audit)

[.npmrc support](/docs/install/npmrc)

Bundler

[`Bun.build`](/docs/bundler)

[HTML & static sites](/docs/bundler/html)

[CSS](/docs/bundler/css)

[Fullstack Dev Server](/docs/bundler/fullstack)

[Hot reloading](/docs/bundler/hmr)

[Loaders](/docs/bundler/loaders)

[Plugins](/docs/bundler/plugins)

[Macros](/docs/bundler/macros)

[vs esbuild](/docs/bundler/vs-esbuild)

Test runner

[`bun test`](/docs/cli/test)

[Writing tests](/docs/test/writing)

[Watch mode](/docs/test/hot)

[Lifecycle hooks](/docs/test/lifecycle)

[Mocks](/docs/test/mocks)

[Snapshots](/docs/test/snapshots)

[Dates and times](/docs/test/time)

[Code coverage](/docs/test/coverage)

[Test reporters](/docs/test/reporters)

[Test configuration](/docs/test/configuration)

[Runtime behavior](/docs/test/runtime-behavior)

[Finding tests](/docs/test/discovery)

[DOM testing](/docs/test/dom)

Package runner

[`bunx`](/docs/cli/bunx)

API

[HTTP server](/docs/api/http)

[HTTP client](/docs/api/fetch)

[WebSockets](/docs/api/websockets)

[Workers](/docs/api/workers)

[Binary data](/docs/api/binary-data)

[Streams](/docs/api/streams)

[SQL](/docs/api/sql)

[S3 Object Storage](/docs/api/s3)

[File I/O](/docs/api/file-io)

[Redis client](/docs/api/redis)

[import.meta](/docs/api/import-meta)

[SQLite](/docs/api/sqlite)

[FileSystemRouter](/docs/api/file-system-router)

[TCP sockets](/docs/api/tcp)

[UDP sockets](/docs/api/udp)

[Globals](/docs/api/globals)

[$ Shell](/docs/runtime/shell)

[Child processes](/docs/api/spawn)

[HTMLRewriter](/docs/api/html-rewriter)

[Hashing](/docs/api/hashing)

[Console](/docs/api/console)

[Cookie](/docs/api/cookie)

[FFI](/docs/api/ffi)

[C Compiler](/docs/api/cc)

[Testing](/docs/cli/test)

[Utils](/docs/api/utils)

[Node-API](/docs/api/node-api)

[Glob](/docs/api/glob)

[DNS](/docs/api/dns)

[Semver](/docs/api/semver)

[Color](/docs/api/color)

[Transpiler](/docs/api/transpiler)

Project

[Roadmap](/docs/project/roadmap)

[Benchmarking](/docs/project/benchmarking)

[Contributing](/docs/project/contributing)

[Building Windows](/docs/project/building-windows)

[Bindgen](/docs/project/bindgen)

[License](/docs/project/licensing)

[![Bun logo](<image>)](/)

Search the docs...

/

[Docs](/docs)[Reference](/reference)[Guides](/guides)[Blog](/blog)

[![Discord logo](<image>)](https://bun.sh/discord)

[Discord](https://bun.sh/discord)

[![GitHub logo](<image>)](https://github.com/oven-sh/bun)

Intro

[What is Bun?](/docs/index)

[Installation](/docs/installation)

[Quickstart](/docs/quickstart)

[TypeScript](/docs/typescript)

Templating

[`bun init`](/docs/cli/init)

[`bun create`](/docs/cli/bun-create)

Runtime

[`bun run`](/docs/cli/run)

[File types](/docs/runtime/loaders)

[TypeScript](/docs/runtime/typescript)

[JSX](/docs/runtime/jsx)

[Environment variables](/docs/runtime/env)

[Bun APIs](/docs/runtime/bun-apis)

[Web APIs](/docs/runtime/web-apis)

[Node.js compatibility](/docs/runtime/nodejs-apis)

[Single-file executable](/docs/bundler/executables)

[Plugins](/docs/runtime/plugins)

[Watch mode](/docs/runtime/hot)

[Module resolution](/docs/runtime/modules)

[Auto-install](/docs/runtime/autoimport)

[bunfig.toml](/docs/runtime/bunfig)

[Debugger](/docs/runtime/debugger)

Framework APISOON

Package manager

[`bun install`](/docs/cli/install)

[`bun add`](/docs/cli/add)

[`bun remove`](/docs/cli/remove)

[`bun update`](/docs/cli/update)

[`bun publish`](/docs/cli/publish)

[`bun outdated`](/docs/cli/outdated)

[`bun link`](/docs/cli/link)

[`bun pm`](/docs/cli/pm)

[Global cache](/docs/install/cache)

[Workspaces](/docs/install/workspaces)

[Catalogs](/docs/install/catalogs)

[Lifecycle scripts](/docs/install/lifecycle)

[Filter](/docs/cli/filter)

[Lockfile](/docs/install/lockfile)

[Scopes and registries](/docs/install/registries)

[Overrides and resolutions](/docs/install/overrides)

[Patch dependencies](/docs/install/patch)

[Audit dependencies](/docs/install/audit)

[.npmrc support](/docs/install/npmrc)

Bundler

[`Bun.build`](/docs/bundler)

[HTML & static sites](/docs/bundler/html)

[CSS](/docs/bundler/css)

[Fullstack Dev Server](/docs/bundler/fullstack)

[Hot reloading](/docs/bundler/hmr)

[Loaders](/docs/bundler/loaders)

[Plugins](/docs/bundler/plugins)

[Macros](/docs/bundler/macros)

[vs esbuild](/docs/bundler/vs-esbuild)

Test runner

[`bun test`](/docs/cli/test)

[Run tests](#run-tests)

[CI/CD integration](#ci-cd-integration)

[GitHub Actions](#github-actions)

[JUnit XML reports (GitLab, etc.)](#junit-xml-reports-gitlab-etc)

[Timeouts](#timeouts)

[Rerun tests](#rerun-tests)

[Bail out with `--bail`](#bail-out-with-bail)

[Watch mode](#watch-mode)

[Lifecycle hooks](#lifecycle-hooks)

[Mocks](#mocks)

[Snapshot testing](#snapshot-testing)

[UI & DOM testing](#ui-dom-testing)

[Performance](#performance)

[Writing tests](/docs/test/writing)

[Watch mode](/docs/test/hot)

[Lifecycle hooks](/docs/test/lifecycle)

[Mocks](/docs/test/mocks)

[Snapshots](/docs/test/snapshots)

[Dates and times](/docs/test/time)

[Code coverage](/docs/test/coverage)

[Test reporters](/docs/test/reporters)

[Test configuration](/docs/test/configuration)

[Runtime behavior](/docs/test/runtime-behavior)

[Finding tests](/docs/test/discovery)

[DOM testing](/docs/test/dom)

Package runner

[`bunx`](/docs/cli/bunx)

API

[HTTP server](/docs/api/http)

[HTTP client](/docs/api/fetch)

[WebSockets](/docs/api/websockets)

[Workers](/docs/api/workers)

[Binary data](/docs/api/binary-data)

[Streams](/docs/api/streams)

[SQL](/docs/api/sql)

[S3 Object Storage](/docs/api/s3)

[File I/O](/docs/api/file-io)

[Redis client](/docs/api/redis)

[import.meta](/docs/api/import-meta)

[SQLite](/docs/api/sqlite)

[FileSystemRouter](/docs/api/file-system-router)

[TCP sockets](/docs/api/tcp)

[UDP sockets](/docs/api/udp)

[Globals](/docs/api/globals)

[$ Shell](/docs/runtime/shell)

[Child processes](/docs/api/spawn)

[HTMLRewriter](/docs/api/html-rewriter)

[Hashing](/docs/api/hashing)

[Console](/docs/api/console)

[Cookie](/docs/api/cookie)

[FFI](/docs/api/ffi)

[C Compiler](/docs/api/cc)

[Testing](/docs/cli/test)

[Run tests](#run-tests)

[CI/CD integration](#ci-cd-integration)

[GitHub Actions](#github-actions)

[JUnit XML reports (GitLab, etc.)](#junit-xml-reports-gitlab-etc)

[Timeouts](#timeouts)

[Rerun tests](#rerun-tests)

[Bail out with `--bail`](#bail-out-with-bail)

[Watch mode](#watch-mode)

[Lifecycle hooks](#lifecycle-hooks)

[Mocks](#mocks)

[Snapshot testing](#snapshot-testing)

[UI & DOM testing](#ui-dom-testing)

[Performance](#performance)

[Utils](/docs/api/utils)

[Node-API](/docs/api/node-api)

[Glob](/docs/api/glob)

[DNS](/docs/api/dns)

[Semver](/docs/api/semver)

[Color](/docs/api/color)

[Transpiler](/docs/api/transpiler)

Project

[Roadmap](/docs/project/roadmap)

[Benchmarking](/docs/project/benchmarking)

[Contributing](/docs/project/contributing)

[Building Windows](/docs/project/building-windows)

[Bindgen](/docs/project/bindgen)

[License](/docs/project/licensing)

# Testing

[Copy as Markdown]()

[Download as Markdown](/docs/cli/test.md)

[![GitHub logo](<image>)](https://github.com/oven-sh/bun/edit/main/docs/cli/test.md)

[Edit on GitHub](https://github.com/oven-sh/bun/edit/main/docs/cli/test.md)

Bun ships with a fast, built-in, Jest-compatible test runner. Tests are executed with the Bun runtime, and support the following features.

* TypeScript and JSX
* Lifecycle hooks
* Snapshot testing
* UI & DOM testing
* Watch mode with `--watch`
* Script pre-loading with `--preload`

Bun aims for compatibility with Jest, but not everything is implemented. To track compatibility, see [this tracking issue](https://github.com/oven-sh/bun/issues/1825).

## []()[Run tests](#run-tests)

```
bun test
```

Tests are written in JavaScript or TypeScript with a Jest-like API. Refer to [Writing tests](https://bun.sh/docs/test/writing) for full documentation.

math.test.ts

```
import { expect, test } from "bun:test";

test("2 + 2", () => {
  expect(2 + 2).toBe(4);
});
```

The runner recursively searches the working directory for files that match the following patterns:

* `*.test.{js|jsx|ts|tsx}`
* `*_test.{js|jsx|ts|tsx}`
* `*.spec.{js|jsx|ts|tsx}`
* `*_spec.{js|jsx|ts|tsx}`

You can filter the set of *test files* to run by passing additional positional arguments to `bun test`. Any test file with a path that matches one of the filters will run. Commonly, these filters will be file or directory names; glob patterns are not yet supported.

```
bun test <filter> <filter> ...
```

To filter by *test name*, use the `-t`/`--test-name-pattern` flag.

```
# run all tests or test suites with "addition" in the name
```

```
bun test --test-name-pattern addition
```

To run a specific file in the test runner, make sure the path starts with `./` or `/` to distinguish it from a filter name.

```
bun test ./test/specific-file.test.ts
```

The test runner runs all tests in a single process. It loads all `--preload` scripts (see [Lifecycle](https://bun.sh/docs/test/lifecycle) for details), then runs all tests. If a test fails, the test runner will exit with a non-zero exit code.

## []()[CI/CD integration](#ci-cd-integration)

`bun test` supports a variety of CI/CD integrations.

### []()[GitHub Actions](#github-actions)

`bun test` automatically detects if it's running inside GitHub Actions and will emit GitHub Actions annotations to the console directly.

No configuration is needed, other than installing `bun` in the workflow and running `bun test`.

#### How to install `bun` in a GitHub Actions workflow

To use `bun test` in a GitHub Actions workflow, add the following step:

```
jobs:
  build:
    name: build-app
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install bun
        uses: oven-sh/setup-bun@v2
      - name: Install dependencies # (assuming your project has dependencies)
        run: bun install # You can use npm/yarn/pnpm instead if you prefer
      - name: Run tests
        run: bun test
```

From there, you'll get GitHub Actions annotations.

### []()[JUnit XML reports (GitLab, etc.)](#junit-xml-reports-gitlab-etc)

To use `bun test` with a JUnit XML reporter, you can use the `--reporter=junit` in combination with `--reporter-outfile`.

```
bun test --reporter=junit --reporter-outfile=./bun.xml
```

This will continue to output to stdout/stderr as usual, and also write a JUnit<!-- --> <!-- -->XML report to the given path at the very end of the test run.

JUnit XML is a popular format for reporting test results in CI/CD pipelines.

## []()[Timeouts](#timeouts)

Use the `--timeout` flag to specify a *per-test* timeout in milliseconds. If a test times out, it will be marked as failed. The default value is `5000`.

```
# default value is 5000
```

```
bun test --timeout 20
```

## []()[Rerun tests](#rerun-tests)

Use the `--rerun-each` flag to run each test multiple times. This is useful for detecting flaky or non-deterministic test failures.

```
bun test --rerun-each 100
```

## []()[Bail out with `--bail`](#bail-out-with-bail)

Use the `--bail` flag to abort the test run early after a pre-determined number of test failures. By default Bun will run all tests and report all failures, but sometimes in CI environments it's preferable to terminate earlier to reduce CPU usage.

```
# bail after 1 failure
```

```
bun test --bail
```

```

# bail after 10 failure
```

```
bun test --bail=10
```

## []()[Watch mode](#watch-mode)

Similar to `bun run`, you can pass the `--watch` flag to `bun test` to watch for changes and re-run tests.

```
bun test --watch
```

## []()[Lifecycle hooks](#lifecycle-hooks)

Bun supports the following lifecycle hooks:

| Hook         | Description                 |
| ------------ | --------------------------- |
| `beforeAll`  | Runs once before all tests. |
| `beforeEach` | Runs before each test.      |
| `afterEach`  | Runs after each test.       |
| `afterAll`   | Runs once after all tests.  |

These hooks can be defined inside test files, or in a separate file that is preloaded with the `--preload` flag.

```
$ bun test --preload ./setup.ts
```

See [Test > Lifecycle](https://bun.sh/docs/test/lifecycle) for complete documentation.

## []()[Mocks](#mocks)

Create mock functions with the `mock` function. Mocks are automatically reset between tests.

```
import { test, expect, mock } from "bun:test";
const random = mock(() => Math.random());

test("random", () => {
  const val = random();
  expect(val).toBeGreaterThan(0);
  expect(random).toHaveBeenCalled();
  expect(random).toHaveBeenCalledTimes(1);
});
```

Alternatively, you can use `jest.fn()`, it behaves identically.

```
import { test, expect, mock } from "bun:test";
import { test, expect, jest } from "bun:test";

const random = mock(() => Math.random());
const random = jest.fn(() => Math.random());
```

See [Test > Mocks](https://bun.sh/docs/test/mocks) for complete documentation.

## []()[Snapshot testing](#snapshot-testing)

Snapshots are supported by `bun test`.

```
// example usage of toMatchSnapshot
import { test, expect } from "bun:test";

test("snapshot", () => {
  expect({ a: 1 }).toMatchSnapshot();
});
```

To update snapshots, use the `--update-snapshots` flag.

```
bun test --update-snapshots
```

See [Test > Snapshots](https://bun.sh/docs/test/snapshots) for complete documentation.

## []()[UI & DOM testing](#ui-dom-testing)

Bun is compatible with popular UI testing libraries:

* [HappyDOM](https://github.com/capricorn86/happy-dom)
* [DOM Testing Library](https://testing-library.com/docs/dom-testing-library/intro/)
* [React Testing Library](https://testing-library.com/docs/react-testing-library/intro)

See [Test > DOM Testing](https://bun.sh/docs/test/dom) for complete documentation.

## []()[Performance](#performance)

Bun's test runner is fast.

[![](/images/buntest.jpeg)](/images/buntest.jpeg)

Running 266 React SSR tests faster than Jest can print its version number.

## CLI Usage

$bun test \<patterns>

### Flags

#### Test Execution Control

\--only

Only run tests that are marked with "test.only()"

\--todo

Include tests that are marked with "test.todo()"

-t,--test-name-pattern=

<!-- -->

\<val>

Run only tests with a name that matches the given regex.

\--rerun-each=

<!-- -->

\<val>

Re-run each test file \<NUMBER> times, helps catch certain bugs

\--timeout=

<!-- -->

\<val>

Set the per-test timeout in milliseconds, default is 5000.

\--bail=

<!-- -->

\<val>

Exit the test suite after \<NUMBER> failures. If you do not specify a number, it defaults to 1.

#### Snapshots

-u,--update-snapshots

Update snapshot files

#### Coverage

\--coverage

Generate a coverage profile

\--coverage-reporter=

<!-- -->

\<val>

Report coverage in 'text' and/or 'lcov'. Defaults to 'text'.

\--coverage-dir=

<!-- -->

\<val>

Directory for coverage files. Defaults to 'coverage'.

#### Reporting

\--reporter=

<!-- -->

\<val>

Specify the test reporter. Currently --reporter=junit is the only supported format.

\--reporter-outfile=

<!-- -->

\<val>

The output file used for the format from --reporter.

### Examples

Run all test files

bun test

Run all test files with "foo" or "bar" in the file name

bun test foo bar

Run all test files, only including tests whose names includes "baz"

bun test --test-name-pattern baz

Full documentation is available at https\://bun.sh/docs/cli/test

[Previous](/docs/api/cc)

[C Compiler](/docs/api/cc)

[Next](/docs/api/utils)

[Utils](/docs/api/utils)

[![GitHub logo](<image>)](https://github.com/oven-sh/bun/edit/main/docs/cli/test.md)

[Edit on GitHub](https://github.com/oven-sh/bun/edit/main/docs/cli/test.md)
